<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YMIR Hechizera nivel 10 </title>
    <link rel="stylesheet" href="styles.css"> <!-- Enlaza el CSS aquí -->
</head>
<body>
    <h1>Información Categorizada por Niveles</h1>

    <!-- Puntos de Hechicería -->
    <div id="puntos-hechiceria">
        <h2>Puntos de Hechicería</h2>
        <div id="hechiceria-diamonds"></div>
    </div>

    <!-- Hechizos por Niveles -->
    <div id="hechizos">
        <h2>Hechizos</h2>
        <div id="info">Cargando información...</div>
    </div>

    <!-- Botón para limpiar el cache -->
    <div id="limpiar">
        <button id="limpiarCache">Limpiar Hoja</button>
    </div>

    <script>
        // Cargar el archivo JSON
        fetch('data.json')
            .then(response => response.json())
            .then(data => {
                const infoDiv = document.getElementById('info');
                infoDiv.innerHTML = ''; // Limpiar el contenido previo

                // Crear un objeto para agrupar los elementos por nivel
                const levels = {};
                data.items.forEach(item => {
                    if (!levels[item.nivel]) {
                        levels[item.nivel] = [];
                    }
                    levels[item.nivel].push(item);
                });

                // Recorrer los niveles y mostrarlos
                for (let level = 1; level <= 5; level++) {
                    const levelDiv = document.createElement('div');
                    levelDiv.className = 'level';

                    // Contenedor flex para nivel y diamantes
                    const levelHeader = document.createElement('div');
                    levelHeader.className = 'level-header'; // Clase para flexbox

                    const levelTitle = document.createElement('h3');
                    levelTitle.innerHTML = `Nivel ${level}`;

                    // Crear contenedor para los diamantes
                    const diamondContainer = document.createElement('div');
                    diamondContainer.className = 'diamond-container';

                    let diamondCount = 0;
                    if (level === 1) {
                        diamondCount = 4; // 4 diamantes para nivel 1
                    } else if (level <= 4) {
                        diamondCount = 3; // 3 diamantes para niveles 2, 3 y 4
                    } else {
                        diamondCount = 1; // 1 diamante para nivel 5
                    }

                    for (let i = 0; i < diamondCount; i++) {
                        const diamond = document.createElement('div');
                        diamond.className = 'diamond';
                        diamond.addEventListener('click', function() {
                            diamond.classList.toggle('active'); // Cambiar clase al hacer clic
                        });
                        diamondContainer.appendChild(diamond);
                    }

                    levelHeader.appendChild(levelTitle);
                    levelHeader.appendChild(diamondContainer);
                    levelDiv.appendChild(levelHeader); // Agregar nivel y diamantes al nivelDiv

                    // Crear un contenedor para los hechizos
                    const spellsContainer = document.createElement('div');
                    spellsContainer.className = 'spells-container';
                    spellsContainer.style.display = 'none'; // Ocultar por defecto

                    // Agregar evento de clic para mostrar/ocultar hechizos
                    levelTitle.addEventListener('click', function() {
                        spellsContainer.style.display = spellsContainer.style.display === 'none' ? 'block' : 'none';
                    });

                    if (levels[level]) {
                        levels[level].forEach(item => {
                            // Crear el contenido del hechizo
                            const itemDiv = document.createElement('div');
                            itemDiv.className = 'item'; // Agregar la clase item
                            let content = `${item.nombre}<br><div class="item-content">`;

                            // Solo agregar las filas si tienen valor
                            if (item.daño) {
                                content += `<strong>Daño:</strong> ${item.daño}<br>`;
                            }
                            if (item.alcance) {
                                content += `<strong>Alcance:</strong> ${item.alcance}<br>`;
                            }
                            if (item.Concentracion) {
                                content += `<strong>Concentración:</strong> ${item.Concentracion}<br>`;
                            }
                            content += `<strong>Descripción:</strong> ${item.descripcion}<br>`;
                            content += '</div>';

                            itemDiv.innerHTML = content;

                            // Agregar evento de clic para mostrar/ocultar el contenido
                            itemDiv.addEventListener('click', function() {
                                const itemContent = itemDiv.querySelector('.item-content');
                                itemContent.style.display = itemContent.style.display === 'none' ? 'block' : 'none'; // Toggle visibility
                            });

                            spellsContainer.appendChild(itemDiv); // Agregar hechizo al contenedor
                        });
                    }

                    levelDiv.appendChild(spellsContainer); // Agregar contenedor de hechizos al nivel
                    infoDiv.appendChild(levelDiv); // Agregar el nivel completo al contenedor principal
                }
            })
            .catch(error => {
                console.error('Error al cargar el JSON:', error);
                document.getElementById('info').innerText = 'Error al cargar la información.';
            });

        // Limpiar localStorage y refrescar la página
        document.getElementById('limpiarCache').addEventListener('click', function() {
            localStorage.clear(); // Limpiar el cache local
            location.reload(); // Recargar la página
        });
    </script>
</body>
</html>
